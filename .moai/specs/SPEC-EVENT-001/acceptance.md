---
id: SPEC-EVENT-001
type: acceptance
version: "1.0.0"
created: "2026-02-26"
updated: "2026-02-26"
---

# SPEC-EVENT-001: 인수 기준

## 테스트 시나리오

### AC-001: 이벤트 목록에 참여자 수 표시 (REQ-U-001)

**Given** 3개의 이벤트가 존재하고 각각 5건, 3건, 0건의 의뢰가 연결된 상태
**When** 관리자가 이벤트 관리 페이지에 접근할 때
**Then** 각 이벤트 옆에 참여자 수(5, 3, 0)가 정확하게 표시된다
**And** 이벤트 목록은 최신 이벤트 우선으로 정렬된다

---

### AC-002: 이벤트 생성 (REQ-E-001)

**Given** 관리자가 이벤트 관리 페이지에 접근한 상태
**When** 이벤트 생성 폼에 이름 "2026 Spring Conference", 설명 "연례 봄 컨퍼런스", 날짜 "2026-04-15", 장소 "서울 컨벤션센터"를 입력하고 제출할 때
**Then** 새 이벤트가 events 테이블에 저장된다
**And** 이벤트 목록에 새로 생성된 이벤트가 표시된다
**And** 참여자 수는 0으로 표시된다

---

### AC-003: 이벤트 생성 입력 검증 (REQ-E-001)

**Given** 관리자가 이벤트 생성 폼을 열고 있는 상태
**When** 이름 필드를 비워둔 채 제출할 때
**Then** "이벤트 이름은 필수입니다" 에러 메시지가 표시된다
**And** 이벤트가 저장되지 않는다

**Given** 관리자가 이벤트 생성 폼을 열고 있는 상태
**When** 이름 필드에 101자 이상의 텍스트를 입력할 때
**Then** 100자 제한을 초과했다는 에러 메시지가 표시된다

---

### AC-004: 의뢰에 이벤트 할당 (REQ-E-002)

**Given** "2026 Spring Conference" 이벤트가 존재하고, 이벤트 미할당 상태인 의뢰가 존재하는 상태
**When** 관리자가 의뢰 상세 페이지에서 이벤트 셀렉터를 통해 "2026 Spring Conference"를 선택할 때
**Then** 해당 의뢰의 event_id가 이벤트 ID로 업데이트된다
**And** 의뢰 목록에서 해당 의뢰에 "2026 Spring Conference" 배지가 표시된다

---

### AC-005: 의뢰에서 이벤트 연결 해제 (REQ-E-002)

**Given** "2026 Spring Conference" 이벤트에 연결된 의뢰가 존재하는 상태
**When** 관리자가 의뢰 상세 페이지에서 이벤트 셀렉터를 "미할당"으로 변경할 때
**Then** 해당 의뢰의 event_id가 NULL로 업데이트된다
**And** 의뢰 목록에서 해당 의뢰에 "미할당" 배지가 표시된다

---

### AC-006: 이벤트별 의뢰 필터링 (REQ-E-003)

**Given** "Conference A" 이벤트에 3건, "Workshop B" 이벤트에 2건, 미할당 5건의 의뢰가 존재하는 상태
**When** 관리자가 의뢰 목록에서 이벤트 필터를 "Conference A"로 설정할 때
**Then** "Conference A"에 연결된 3건의 의뢰만 표시된다
**And** 다른 이벤트 및 미할당 의뢰는 표시되지 않는다

**When** 이벤트 필터를 "미할당"으로 변경할 때
**Then** event_id가 NULL인 5건의 의뢰만 표시된다

**When** 이벤트 필터를 "전체"로 변경할 때
**Then** 모든 10건의 의뢰가 표시된다

---

### AC-007: 참여자 이벤트 이력 조회 (REQ-E-004)

**Given** user@example.com 사용자가 "Conference A"와 "Workshop B" 두 이벤트에 각각 의뢰를 제출한 상태
**When** 관리자가 해당 사용자의 참여 이력을 조회할 때
**Then** "Conference A"와 "Workshop B" 이벤트 정보가 시간순으로 표시된다
**And** 각 이벤트에 대한 의뢰 상태(submitted, processing 등)가 표시된다

---

### AC-008: CSV 대량 업로드 시 이벤트 할당 (REQ-E-005)

**Given** "2026 Spring Conference" 이벤트가 존재하고 CSV 파일에 10건의 의뢰 데이터가 포함된 상태
**When** 관리자가 BulkUploadModal에서 이벤트로 "2026 Spring Conference"를 선택하고 업로드를 실행할 때
**Then** 10건의 의뢰 모두에 해당 이벤트의 event_id가 할당된다
**And** 업로드 결과에 이벤트 할당 건수가 표시된다

---

### AC-009: CSV 대량 업로드 시 이벤트 미선택 (REQ-E-005)

**Given** CSV 파일에 5건의 의뢰 데이터가 포함된 상태
**When** 관리자가 BulkUploadModal에서 이벤트를 선택하지 않고 업로드를 실행할 때
**Then** 5건의 의뢰 모두의 event_id가 NULL(미할당)로 저장된다
**And** 기존 대량 업로드 기능에 회귀가 발생하지 않는다

---

### AC-010: 미할당 의뢰 표시 (REQ-S-001)

**Given** event_id가 NULL인 의뢰가 존재하는 상태
**When** 관리자가 의뢰 목록을 확인할 때
**Then** 해당 의뢰에 회색 계열의 "미할당" 배지가 표시된다
**And** event_id가 있는 의뢰에는 파란색 계열의 이벤트명 배지가 표시된다
**And** 두 배지는 시각적으로 명확하게 구분된다

---

### AC-011: 참여자가 있는 이벤트 삭제 방지 (REQ-N-001)

**Given** "2026 Spring Conference" 이벤트에 3건의 의뢰가 연결된 상태
**When** 관리자가 해당 이벤트의 삭제 버튼을 클릭할 때
**Then** "이 이벤트에 3건의 의뢰가 연결되어 있어 삭제할 수 없습니다. 먼저 의뢰의 이벤트 연결을 해제해주세요." 메시지가 표시된다
**And** 이벤트가 삭제되지 않는다

---

### AC-012: 참여자가 없는 이벤트 삭제 (REQ-N-001)

**Given** 연결된 의뢰가 0건인 이벤트가 존재하는 상태
**When** 관리자가 해당 이벤트의 삭제 버튼을 클릭하고 확인할 때
**Then** 이벤트가 events 테이블에서 삭제된다
**And** 이벤트 목록에서 해당 이벤트가 더 이상 표시되지 않는다

---

## Edge Cases

### EC-001: 빈 이벤트 목록

**Given** events 테이블에 이벤트가 0건인 상태
**When** 관리자가 이벤트 관리 페이지에 접근할 때
**Then** "등록된 이벤트가 없습니다. 새 이벤트를 생성해주세요." 안내 메시지가 표시된다
**And** 의뢰 목록의 이벤트 필터에는 "전체"와 "미할당" 옵션만 표시된다

### EC-002: 동시 이벤트 할당 변경

**Given** 두 명의 관리자가 동일한 의뢰의 상세 페이지를 열고 있는 상태
**When** 관리자 A가 이벤트를 "Conference A"로 변경하고, 관리자 B가 "Workshop B"로 변경할 때
**Then** 마지막으로 저장된 값이 반영된다 (Last Write Wins)
**And** 페이지 새로고침 시 최신 상태가 표시된다

### EC-003: 이벤트 수정 시 참여자 영향

**Given** "2026 Spring Conference" 이벤트에 5건의 의뢰가 연결된 상태
**When** 관리자가 이벤트 이름을 "2026 Spring Tech Conference"로 수정할 때
**Then** 이벤트명만 변경되고 연결된 의뢰의 event_id는 변경되지 않는다
**And** 의뢰 목록에서 업데이트된 이벤트명 배지가 표시된다

### EC-004: 특수 문자가 포함된 이벤트 이름

**Given** 관리자가 이벤트 생성 폼을 열고 있는 상태
**When** 이벤트 이름에 "2026 <Spring> Conference & Workshop"을 입력할 때
**Then** HTML 엔티티가 이스케이프 처리되어 안전하게 저장 및 표시된다

### EC-005: 대량 의뢰가 연결된 이벤트 참여자 목록

**Given** 이벤트에 100건 이상의 의뢰가 연결된 상태
**When** 관리자가 이벤트 참여자 목록을 조회할 때
**Then** 참여자 목록이 페이지네이션되어 표시된다 (기본 20건씩)
**And** 전체 참여자 수가 목록 상단에 표시된다

---

## 성능 기준

| 항목                                | 기준값          | 측정 방법                      |
| ----------------------------------- | --------------- | ------------------------------ |
| 이벤트 목록 조회 (참여자 수 포함)   | P95 < 500ms     | GET /api/events 응답 시간      |
| 이벤트별 의뢰 필터링                | P95 < 300ms     | 필터 적용 후 목록 렌더링 완료  |
| 이벤트 생성/수정                    | P95 < 200ms     | API 응답 시간                  |
| 이벤트 할당/해제                    | P95 < 200ms     | PATCH API 응답 시간            |
| CSV 대량 업로드 (이벤트 포함, 50건) | P95 < 5s        | 업로드 완료까지 총 시간        |

---

## Quality Gate 기준

### TRUST 5 검증 항목

| 항목       | 기준                                                         |
| ---------- | ------------------------------------------------------------ |
| Tested     | 이벤트 CRUD API 단위 테스트, 삭제 방지 로직 테스트, 통합 테스트 |
| Readable   | Event 타입 명확한 네이밍, JSDoc 주석, 함수명 동사+명사 패턴 준수 |
| Unified    | 기존 admin 컴포넌트와 동일한 스타일 패턴, Tailwind 유틸리티 클래스 일관성 |
| Secured    | SQL Injection 방지 (Supabase 파라미터 바인딩), XSS 방지 (입력 이스케이프), RLS 정책 적용 |
| Trackable  | API 엔드포인트별 에러 로깅, 이벤트 할당 변경 이력 추적 가능  |

### Definition of Done

- [ ] events 테이블 마이그레이션이 Supabase에 적용됨
- [ ] card_requests.event_id 컬럼이 추가되고 기존 데이터에 영향 없음
- [ ] 이벤트 CRUD API 엔드포인트가 정상 동작함 (GET, POST, PUT, DELETE)
- [ ] 참여자가 있는 이벤트 삭제가 차단됨 (409 Conflict)
- [ ] 이벤트 관리 페이지에서 이벤트 목록, 생성, 수정, 삭제가 가능함
- [ ] 의뢰 목록에서 이벤트별 필터링이 동작함
- [ ] 의뢰 상세에서 이벤트 할당/해제가 가능함
- [ ] 미할당 의뢰에 "미할당" 배지가 표시됨
- [ ] CSV 대량 업로드 시 이벤트 선택이 가능하며 기존 기능에 회귀 없음
- [ ] 참여자 이벤트 이력 조회가 동작함
- [ ] 모든 API 입력에 대해 검증이 적용됨
- [ ] RLS 정책이 events 테이블에 적용됨
- [ ] 기존 의뢰 관리 기능에 회귀가 발생하지 않음
